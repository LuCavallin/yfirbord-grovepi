language: python
python:
- '2.7'
sudo: false
cache:
  directories:
    - "~/.platformio"
    - ".pioenvs"

env:
  global:
    - secure: mCCs+sNKb5uETm+QfqvXMUKaSIaFy6NhMSema6qzCRaW0CH4eSUC4uTxZ4+pshuE+/C8xJICVjrWytTVgeu/iGxZYWnDAkIqn5Not52E11JC+ctm4/YBvK7JJf5jr/DGdASWfAUFHl5iIAh5kJxfgjtRO3SBcHVXYb70GBDNLXpQtwtujZqQ50DBRU9eVK2ObUR/avWTF411Y21mBHCzkywcmZ2wZ3Nv4Ti65F2JyQ5Kz9oPYarZwCMZ67slqrHv/Dy7fDXnsbY7Q5q1zPWRXVecx2mZEB35LItcB20rER0y0Vq7gtmaYwytKCKjCwKCsQqjADpI8vxODK/1mNzQ+cICCIf9lTjp7k2ZeRyjpj/2vFPiEnA9OU53jzZore4EQT64vVnoaMZzgGRgGDu4FILucZ0ZpJMjRKCFcaz/THR88dhehG0eozhpXxknxXGTQgYC7AIZC3Pqq1ljfkqIFba9it0PatOBBvSzmC3YBasmbqWy50sTJLN1C3Hyk7pYl/hU7FrGXHW68k0UuFMwFU7DPPACenxF4s7YedT4QrzRbiPPZIvCrr5PV6rJWjOiCTQmH5n5220i+5PyObG+HntfqW5YmGfqvPI1Os7jbCS4vj6D0Ub9hfNOdmHD5Qd3FKCI5ZIOt4z2QwjS3dqcto68ZwfzM4xDs5kgdmyY+f8=
    # platformio build flags

install:
    - pip install -U platformio
    - platformio update

jobs:
  include:
  - stage: build
    script: platformio run
  - stage: release
    script: skip
    deploy:
      provider: releases
      api_key:
        secure: hDWCX/Hv/h1ql7TJQwb+Wzv/fGdIkxNhlRf36XfsN/Bz68HvF8W7zZ6hha/ZbAeZ/2xy+iJ5eBU3e4fya4aDaMdUlIA7vu+zZ872tjlW8qKrVfij4fOcLdgjz/wo6P9qNBfpkXokBimGyMc257TRE7gwa7NQJ6txxSq6Ifuy+fDxOtPNKdkp5VCkOtlJ9Z8QS591NYYZU1El1OgmwvJgMPXl73j8QIWU7RUBjIvCMsK62w/UKdJWwNCx4in+UdpkTjsfiyMxlgBGLI2g4llawclQp226d3YHhaRrqLI/Z4Xdt3pGA/hkG0HwVGRvHcRoQfcfXfIDyCxK2uWakWHhLzok9SS0c9vdRjrqDsJfp0URDxaUiv7fEwO5njCmd8DBib+wr5o9fRFr/L8PKiI913Ru4StivUWg/cWp0kVtIQ84N56zF3U8AvZgDbSVmisrpHvl4pc6ZTvA6xC0pMM0ASEdrjaCUnn51tcNdmIfK9fDmr6AMFLZtunXqaVg8zmqtT7NFwrgwHutB35h8YRopaTAWNJYe8NlQrNVNxmkCPvbeM6VL8R/H/qHLWY9lzDmqR3KyPyvCO1gwG6SEp/IPvd3P+puoY4cfgCVWQuZpp5ZRauzQqeUZqXpjhhTo7CNA02OtHVf/L+NecPPZQnLoGW159s9D2JLXTtECa0pAuQ=
      file: .pioenvs/yun/firmware.hex
      skip_cleanup: true
      on:
        tags: true
